{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport global from 'global';\nimport { logger } from '@storybook/client-logger';\nimport { FORCE_RE_RENDER, STORY_RENDERED, UPDATE_STORY_ARGS, RESET_STORY_ARGS, UPDATE_GLOBALS } from '@storybook/core-events';\nimport { addons } from './index';\nvar globalWindow = global.window;\nexport var HooksContext = /*#__PURE__*/function () {\n  function HooksContext() {\n    var _this = this;\n\n    _classCallCheck(this, HooksContext);\n\n    this.hookListsMap = void 0;\n    this.mountedDecorators = void 0;\n    this.prevMountedDecorators = void 0;\n    this.currentHooks = void 0;\n    this.nextHookIndex = void 0;\n    this.currentPhase = void 0;\n    this.currentEffects = void 0;\n    this.prevEffects = void 0;\n    this.currentDecoratorName = void 0;\n    this.hasUpdates = void 0;\n    this.currentContext = void 0;\n\n    this.renderListener = function (storyId) {\n      if (storyId !== _this.currentContext.id) return;\n\n      _this.triggerEffects();\n\n      _this.currentContext = null;\n\n      _this.removeRenderListeners();\n    };\n\n    this.init();\n  }\n\n  _createClass(HooksContext, [{\n    key: \"init\",\n    value: function init() {\n      this.hookListsMap = new WeakMap();\n      this.mountedDecorators = new Set();\n      this.prevMountedDecorators = this.mountedDecorators;\n      this.currentHooks = [];\n      this.nextHookIndex = 0;\n      this.currentPhase = 'NONE';\n      this.currentEffects = [];\n      this.prevEffects = [];\n      this.currentDecoratorName = null;\n      this.hasUpdates = false;\n      this.currentContext = null;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.prevEffects.forEach(function (effect) {\n        if (effect.destroy) {\n          effect.destroy();\n        }\n      });\n      this.init();\n      this.removeRenderListeners();\n    }\n  }, {\n    key: \"getNextHook\",\n    value: function getNextHook() {\n      var hook = this.currentHooks[this.nextHookIndex];\n      this.nextHookIndex += 1;\n      return hook;\n    }\n  }, {\n    key: \"triggerEffects\",\n    value: function triggerEffects() {\n      var _this2 = this; // destroy removed effects\n\n\n      this.prevEffects.forEach(function (effect) {\n        if (!_this2.currentEffects.includes(effect) && effect.destroy) {\n          effect.destroy();\n        }\n      }); // trigger added effects\n\n      this.currentEffects.forEach(function (effect) {\n        if (!_this2.prevEffects.includes(effect)) {\n          // eslint-disable-next-line no-param-reassign\n          effect.destroy = effect.create();\n        }\n      });\n      this.prevEffects = this.currentEffects;\n      this.currentEffects = [];\n    }\n  }, {\n    key: \"addRenderListeners\",\n    value: function addRenderListeners() {\n      this.removeRenderListeners();\n      var channel = addons.getChannel();\n      channel.on(STORY_RENDERED, this.renderListener);\n    }\n  }, {\n    key: \"removeRenderListeners\",\n    value: function removeRenderListeners() {\n      var channel = addons.getChannel();\n      channel.removeListener(STORY_RENDERED, this.renderListener);\n    }\n  }]);\n\n  return HooksContext;\n}();\n\nfunction hookify(fn) {\n  return function () {\n    var _ref = typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'function' ? arguments.length <= 1 ? undefined : arguments[1] : arguments.length <= 0 ? undefined : arguments[0],\n        hooks = _ref.hooks;\n\n    var prevPhase = hooks.currentPhase;\n    var prevHooks = hooks.currentHooks;\n    var prevNextHookIndex = hooks.nextHookIndex;\n    var prevDecoratorName = hooks.currentDecoratorName;\n    hooks.currentDecoratorName = fn.name;\n\n    if (hooks.prevMountedDecorators.has(fn)) {\n      hooks.currentPhase = 'UPDATE';\n      hooks.currentHooks = hooks.hookListsMap.get(fn) || [];\n    } else {\n      hooks.currentPhase = 'MOUNT';\n      hooks.currentHooks = [];\n      hooks.hookListsMap.set(fn, hooks.currentHooks);\n      hooks.prevMountedDecorators.add(fn);\n    }\n\n    hooks.nextHookIndex = 0;\n    var prevContext = globalWindow.STORYBOOK_HOOKS_CONTEXT;\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = hooks;\n    var result = fn.apply(void 0, arguments);\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = prevContext;\n\n    if (hooks.currentPhase === 'UPDATE' && hooks.getNextHook() != null) {\n      throw new Error('Rendered fewer hooks than expected. This may be caused by an accidental early return statement.');\n    }\n\n    hooks.currentPhase = prevPhase;\n    hooks.currentHooks = prevHooks;\n    hooks.nextHookIndex = prevNextHookIndex;\n    hooks.currentDecoratorName = prevDecoratorName;\n    return result;\n  };\n} // Counter to prevent infinite loops.\n\n\nvar numberOfRenders = 0;\nvar RENDER_LIMIT = 25;\nexport var applyHooks = function applyHooks(applyDecorators) {\n  return function (storyFn, decorators) {\n    var decorated = applyDecorators(hookify(storyFn), decorators.map(function (decorator) {\n      return hookify(decorator);\n    }));\n    return function (context) {\n      var _ref2 = context,\n          hooks = _ref2.hooks;\n      hooks.prevMountedDecorators = hooks.mountedDecorators;\n      hooks.mountedDecorators = new Set([storyFn].concat(_toConsumableArray(decorators)));\n      hooks.currentContext = context;\n      hooks.hasUpdates = false;\n      var result = decorated(context);\n      numberOfRenders = 1;\n\n      while (hooks.hasUpdates) {\n        hooks.hasUpdates = false;\n        hooks.currentEffects = [];\n        result = decorated(context);\n        numberOfRenders += 1;\n\n        if (numberOfRenders > RENDER_LIMIT) {\n          throw new Error('Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.');\n        }\n      }\n\n      hooks.addRenderListeners();\n      return result;\n    };\n  };\n};\n\nvar areDepsEqual = function areDepsEqual(deps, nextDeps) {\n  return deps.length === nextDeps.length && deps.every(function (dep, i) {\n    return dep === nextDeps[i];\n  });\n};\n\nvar invalidHooksError = function invalidHooksError() {\n  return new Error('Storybook preview hooks can only be called inside decorators and story functions.');\n};\n\nfunction getHooksContextOrNull() {\n  return globalWindow.STORYBOOK_HOOKS_CONTEXT || null;\n}\n\nfunction getHooksContextOrThrow() {\n  var hooks = getHooksContextOrNull();\n\n  if (hooks == null) {\n    throw invalidHooksError();\n  }\n\n  return hooks;\n}\n\nfunction useHook(name, callback, deps) {\n  var hooks = getHooksContextOrThrow();\n\n  if (hooks.currentPhase === 'MOUNT') {\n    if (deps != null && !Array.isArray(deps)) {\n      logger.warn(\"\".concat(name, \" received a final argument that is not an array (instead, received \").concat(deps, \"). When specified, the final argument must be an array.\"));\n    }\n\n    var _hook = {\n      name: name,\n      deps: deps\n    };\n    hooks.currentHooks.push(_hook);\n    callback(_hook);\n    return _hook;\n  }\n\n  if (hooks.currentPhase === 'UPDATE') {\n    var _hook2 = hooks.getNextHook();\n\n    if (_hook2 == null) {\n      throw new Error('Rendered more hooks than during the previous render.');\n    }\n\n    if (_hook2.name !== name) {\n      logger.warn(\"Storybook has detected a change in the order of Hooks\".concat(hooks.currentDecoratorName ? \" called by \".concat(hooks.currentDecoratorName) : '', \". This will lead to bugs and errors if not fixed.\"));\n    }\n\n    if (deps != null && _hook2.deps == null) {\n      logger.warn(\"\".concat(name, \" received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.\"));\n    }\n\n    if (deps != null && _hook2.deps != null && deps.length !== _hook2.deps.length) {\n      logger.warn(\"The final argument passed to \".concat(name, \" changed size between renders. The order and size of this array must remain constant.\\nPrevious: \").concat(_hook2.deps, \"\\nIncoming: \").concat(deps));\n    }\n\n    if (deps == null || _hook2.deps == null || !areDepsEqual(deps, _hook2.deps)) {\n      callback(_hook2);\n      _hook2.deps = deps;\n    }\n\n    return _hook2;\n  }\n\n  throw invalidHooksError();\n}\n\nfunction useMemoLike(name, nextCreate, deps) {\n  var _useHook = useHook(name, function (hook) {\n    // eslint-disable-next-line no-param-reassign\n    hook.memoizedState = nextCreate();\n  }, deps),\n      memoizedState = _useHook.memoizedState;\n\n  return memoizedState;\n}\n/* Returns a memoized value, see https://reactjs.org/docs/hooks-reference.html#usememo */\n\n\nexport function useMemo(nextCreate, deps) {\n  return useMemoLike('useMemo', nextCreate, deps);\n}\n/* Returns a memoized callback, see https://reactjs.org/docs/hooks-reference.html#usecallback */\n\nexport function useCallback(callback, deps) {\n  return useMemoLike('useCallback', function () {\n    return callback;\n  }, deps);\n}\n\nfunction useRefLike(name, initialValue) {\n  return useMemoLike(name, function () {\n    return {\n      current: initialValue\n    };\n  }, []);\n}\n/* Returns a mutable ref object, see https://reactjs.org/docs/hooks-reference.html#useref */\n\n\nexport function useRef(initialValue) {\n  return useRefLike('useRef', initialValue);\n}\n\nfunction triggerUpdate() {\n  var hooks = getHooksContextOrNull(); // Rerun storyFn if updates were triggered synchronously, force rerender otherwise\n\n  if (hooks != null && hooks.currentPhase !== 'NONE') {\n    hooks.hasUpdates = true;\n  } else {\n    try {\n      addons.getChannel().emit(FORCE_RE_RENDER);\n    } catch (e) {\n      logger.warn('State updates of Storybook preview hooks work only in browser');\n    }\n  }\n}\n\nfunction useStateLike(name, initialState) {\n  var stateRef = useRefLike(name, // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n  typeof initialState === 'function' ? initialState() : initialState);\n\n  var setState = function setState(update) {\n    // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n    stateRef.current = typeof update === 'function' ? update(stateRef.current) : update;\n    triggerUpdate();\n  };\n\n  return [stateRef.current, setState];\n}\n/* Returns a stateful value, and a function to update it, see https://reactjs.org/docs/hooks-reference.html#usestate */\n\n\nexport function useState(initialState) {\n  return useStateLike('useState', initialState);\n}\n/* A redux-like alternative to useState, see https://reactjs.org/docs/hooks-reference.html#usereducer */\n\nexport function useReducer(reducer, initialArg, init) {\n  var initialState = init != null ? function () {\n    return init(initialArg);\n  } : initialArg;\n\n  var _useStateLike = useStateLike('useReducer', initialState),\n      _useStateLike2 = _slicedToArray(_useStateLike, 2),\n      state = _useStateLike2[0],\n      setState = _useStateLike2[1];\n\n  var dispatch = function dispatch(action) {\n    return setState(function (prevState) {\n      return reducer(prevState, action);\n    });\n  };\n\n  return [state, dispatch];\n}\n/*\n  Triggers a side effect, see https://reactjs.org/docs/hooks-reference.html#usestate\n  Effects are triggered synchronously after rendering the story\n*/\n\nexport function useEffect(create, deps) {\n  var hooks = getHooksContextOrThrow();\n  var effect = useMemoLike('useEffect', function () {\n    return {\n      create: create\n    };\n  }, deps);\n\n  if (!hooks.currentEffects.includes(effect)) {\n    hooks.currentEffects.push(effect);\n  }\n}\n/* Accepts a map of Storybook channel event listeners, returns an emit function */\n\nexport function useChannel(eventMap) {\n  var deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var channel = addons.getChannel();\n  useEffect(function () {\n    Object.entries(eventMap).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          type = _ref4[0],\n          listener = _ref4[1];\n\n      return channel.on(type, listener);\n    });\n    return function () {\n      Object.entries(eventMap).forEach(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            type = _ref6[0],\n            listener = _ref6[1];\n\n        return channel.removeListener(type, listener);\n      });\n    };\n  }, [].concat(_toConsumableArray(Object.keys(eventMap)), _toConsumableArray(deps)));\n  return useCallback(channel.emit.bind(channel), [channel]);\n}\n/* Returns current story context */\n\nexport function useStoryContext() {\n  var _getHooksContextOrThr = getHooksContextOrThrow(),\n      currentContext = _getHooksContextOrThr.currentContext;\n\n  if (currentContext == null) {\n    throw invalidHooksError();\n  }\n\n  return currentContext;\n}\n/* Returns current value of a story parameter */\n\nexport function useParameter(parameterKey, defaultValue) {\n  var _useStoryContext = useStoryContext(),\n      parameters = _useStoryContext.parameters;\n\n  if (parameterKey) {\n    return parameters[parameterKey] || defaultValue;\n  }\n\n  return undefined;\n}\n/* Returns current value of story args */\n\nexport function useArgs() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext2 = useStoryContext(),\n      storyId = _useStoryContext2.id,\n      args = _useStoryContext2.args;\n\n  var updateArgs = useCallback(function (updatedArgs) {\n    return channel.emit(UPDATE_STORY_ARGS, {\n      storyId: storyId,\n      updatedArgs: updatedArgs\n    });\n  }, [channel, storyId]);\n  var resetArgs = useCallback(function (argNames) {\n    return channel.emit(RESET_STORY_ARGS, {\n      storyId: storyId,\n      argNames: argNames\n    });\n  }, [channel, storyId]);\n  return [args, updateArgs, resetArgs];\n}\n/* Returns current value of global args */\n\nexport function useGlobals() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext3 = useStoryContext(),\n      globals = _useStoryContext3.globals;\n\n  var updateGlobals = useCallback(function (newGlobals) {\n    return channel.emit(UPDATE_GLOBALS, {\n      globals: newGlobals\n    });\n  }, [channel]);\n  return [globals, updateGlobals];\n}","map":{"version":3,"sources":["/Users/michaelnisnevich/Desktop/typescript/React_Kabzda_kak_podrobno/node_modules/@storybook/addons/dist/esm/hooks.js"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","iter","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","global","logger","FORCE_RE_RENDER","STORY_RENDERED","UPDATE_STORY_ARGS","RESET_STORY_ARGS","UPDATE_GLOBALS","addons","globalWindow","window","HooksContext","_this","hookListsMap","mountedDecorators","prevMountedDecorators","currentHooks","nextHookIndex","currentPhase","currentEffects","prevEffects","currentDecoratorName","hasUpdates","currentContext","renderListener","storyId","id","triggerEffects","removeRenderListeners","init","WeakMap","Set","clean","forEach","effect","destroy","getNextHook","hook","_this2","includes","create","addRenderListeners","channel","getChannel","on","removeListener","hookify","fn","_ref","arguments","hooks","prevPhase","prevHooks","prevNextHookIndex","prevDecoratorName","has","get","set","add","prevContext","STORYBOOK_HOOKS_CONTEXT","result","apply","Error","numberOfRenders","RENDER_LIMIT","applyHooks","applyDecorators","storyFn","decorators","decorated","map","decorator","context","_ref2","concat","areDepsEqual","deps","nextDeps","every","dep","invalidHooksError","getHooksContextOrNull","getHooksContextOrThrow","useHook","callback","warn","_hook","_hook2","useMemoLike","nextCreate","_useHook","memoizedState","useMemo","useCallback","useRefLike","initialValue","current","useRef","triggerUpdate","emit","e","useStateLike","initialState","stateRef","setState","update","useState","useReducer","reducer","initialArg","_useStateLike","_useStateLike2","state","dispatch","action","prevState","useEffect","useChannel","eventMap","entries","_ref3","_ref4","type","listener","_ref5","_ref6","keys","bind","useStoryContext","_getHooksContextOrThr","useParameter","parameterKey","defaultValue","_useStoryContext","parameters","useArgs","_useStoryContext2","args","updateArgs","updatedArgs","resetArgs","argNames","useGlobals","_useStoryContext3","globals","updateGlobals","newGlobals"],"mappings":"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","sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport global from 'global';\nimport { logger } from '@storybook/client-logger';\nimport { FORCE_RE_RENDER, STORY_RENDERED, UPDATE_STORY_ARGS, RESET_STORY_ARGS, UPDATE_GLOBALS } from '@storybook/core-events';\nimport { addons } from './index';\nvar globalWindow = global.window;\nexport var HooksContext = /*#__PURE__*/function () {\n  function HooksContext() {\n    var _this = this;\n\n    _classCallCheck(this, HooksContext);\n\n    this.hookListsMap = void 0;\n    this.mountedDecorators = void 0;\n    this.prevMountedDecorators = void 0;\n    this.currentHooks = void 0;\n    this.nextHookIndex = void 0;\n    this.currentPhase = void 0;\n    this.currentEffects = void 0;\n    this.prevEffects = void 0;\n    this.currentDecoratorName = void 0;\n    this.hasUpdates = void 0;\n    this.currentContext = void 0;\n\n    this.renderListener = function (storyId) {\n      if (storyId !== _this.currentContext.id) return;\n\n      _this.triggerEffects();\n\n      _this.currentContext = null;\n\n      _this.removeRenderListeners();\n    };\n\n    this.init();\n  }\n\n  _createClass(HooksContext, [{\n    key: \"init\",\n    value: function init() {\n      this.hookListsMap = new WeakMap();\n      this.mountedDecorators = new Set();\n      this.prevMountedDecorators = this.mountedDecorators;\n      this.currentHooks = [];\n      this.nextHookIndex = 0;\n      this.currentPhase = 'NONE';\n      this.currentEffects = [];\n      this.prevEffects = [];\n      this.currentDecoratorName = null;\n      this.hasUpdates = false;\n      this.currentContext = null;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.prevEffects.forEach(function (effect) {\n        if (effect.destroy) {\n          effect.destroy();\n        }\n      });\n      this.init();\n      this.removeRenderListeners();\n    }\n  }, {\n    key: \"getNextHook\",\n    value: function getNextHook() {\n      var hook = this.currentHooks[this.nextHookIndex];\n      this.nextHookIndex += 1;\n      return hook;\n    }\n  }, {\n    key: \"triggerEffects\",\n    value: function triggerEffects() {\n      var _this2 = this;\n\n      // destroy removed effects\n      this.prevEffects.forEach(function (effect) {\n        if (!_this2.currentEffects.includes(effect) && effect.destroy) {\n          effect.destroy();\n        }\n      }); // trigger added effects\n\n      this.currentEffects.forEach(function (effect) {\n        if (!_this2.prevEffects.includes(effect)) {\n          // eslint-disable-next-line no-param-reassign\n          effect.destroy = effect.create();\n        }\n      });\n      this.prevEffects = this.currentEffects;\n      this.currentEffects = [];\n    }\n  }, {\n    key: \"addRenderListeners\",\n    value: function addRenderListeners() {\n      this.removeRenderListeners();\n      var channel = addons.getChannel();\n      channel.on(STORY_RENDERED, this.renderListener);\n    }\n  }, {\n    key: \"removeRenderListeners\",\n    value: function removeRenderListeners() {\n      var channel = addons.getChannel();\n      channel.removeListener(STORY_RENDERED, this.renderListener);\n    }\n  }]);\n\n  return HooksContext;\n}();\n\nfunction hookify(fn) {\n  return function () {\n    var _ref = typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'function' ? arguments.length <= 1 ? undefined : arguments[1] : arguments.length <= 0 ? undefined : arguments[0],\n        hooks = _ref.hooks;\n\n    var prevPhase = hooks.currentPhase;\n    var prevHooks = hooks.currentHooks;\n    var prevNextHookIndex = hooks.nextHookIndex;\n    var prevDecoratorName = hooks.currentDecoratorName;\n    hooks.currentDecoratorName = fn.name;\n\n    if (hooks.prevMountedDecorators.has(fn)) {\n      hooks.currentPhase = 'UPDATE';\n      hooks.currentHooks = hooks.hookListsMap.get(fn) || [];\n    } else {\n      hooks.currentPhase = 'MOUNT';\n      hooks.currentHooks = [];\n      hooks.hookListsMap.set(fn, hooks.currentHooks);\n      hooks.prevMountedDecorators.add(fn);\n    }\n\n    hooks.nextHookIndex = 0;\n    var prevContext = globalWindow.STORYBOOK_HOOKS_CONTEXT;\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = hooks;\n    var result = fn.apply(void 0, arguments);\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = prevContext;\n\n    if (hooks.currentPhase === 'UPDATE' && hooks.getNextHook() != null) {\n      throw new Error('Rendered fewer hooks than expected. This may be caused by an accidental early return statement.');\n    }\n\n    hooks.currentPhase = prevPhase;\n    hooks.currentHooks = prevHooks;\n    hooks.nextHookIndex = prevNextHookIndex;\n    hooks.currentDecoratorName = prevDecoratorName;\n    return result;\n  };\n} // Counter to prevent infinite loops.\n\n\nvar numberOfRenders = 0;\nvar RENDER_LIMIT = 25;\nexport var applyHooks = function applyHooks(applyDecorators) {\n  return function (storyFn, decorators) {\n    var decorated = applyDecorators(hookify(storyFn), decorators.map(function (decorator) {\n      return hookify(decorator);\n    }));\n    return function (context) {\n      var _ref2 = context,\n          hooks = _ref2.hooks;\n      hooks.prevMountedDecorators = hooks.mountedDecorators;\n      hooks.mountedDecorators = new Set([storyFn].concat(_toConsumableArray(decorators)));\n      hooks.currentContext = context;\n      hooks.hasUpdates = false;\n      var result = decorated(context);\n      numberOfRenders = 1;\n\n      while (hooks.hasUpdates) {\n        hooks.hasUpdates = false;\n        hooks.currentEffects = [];\n        result = decorated(context);\n        numberOfRenders += 1;\n\n        if (numberOfRenders > RENDER_LIMIT) {\n          throw new Error('Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.');\n        }\n      }\n\n      hooks.addRenderListeners();\n      return result;\n    };\n  };\n};\n\nvar areDepsEqual = function areDepsEqual(deps, nextDeps) {\n  return deps.length === nextDeps.length && deps.every(function (dep, i) {\n    return dep === nextDeps[i];\n  });\n};\n\nvar invalidHooksError = function invalidHooksError() {\n  return new Error('Storybook preview hooks can only be called inside decorators and story functions.');\n};\n\nfunction getHooksContextOrNull() {\n  return globalWindow.STORYBOOK_HOOKS_CONTEXT || null;\n}\n\nfunction getHooksContextOrThrow() {\n  var hooks = getHooksContextOrNull();\n\n  if (hooks == null) {\n    throw invalidHooksError();\n  }\n\n  return hooks;\n}\n\nfunction useHook(name, callback, deps) {\n  var hooks = getHooksContextOrThrow();\n\n  if (hooks.currentPhase === 'MOUNT') {\n    if (deps != null && !Array.isArray(deps)) {\n      logger.warn(\"\".concat(name, \" received a final argument that is not an array (instead, received \").concat(deps, \"). When specified, the final argument must be an array.\"));\n    }\n\n    var _hook = {\n      name: name,\n      deps: deps\n    };\n    hooks.currentHooks.push(_hook);\n    callback(_hook);\n    return _hook;\n  }\n\n  if (hooks.currentPhase === 'UPDATE') {\n    var _hook2 = hooks.getNextHook();\n\n    if (_hook2 == null) {\n      throw new Error('Rendered more hooks than during the previous render.');\n    }\n\n    if (_hook2.name !== name) {\n      logger.warn(\"Storybook has detected a change in the order of Hooks\".concat(hooks.currentDecoratorName ? \" called by \".concat(hooks.currentDecoratorName) : '', \". This will lead to bugs and errors if not fixed.\"));\n    }\n\n    if (deps != null && _hook2.deps == null) {\n      logger.warn(\"\".concat(name, \" received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.\"));\n    }\n\n    if (deps != null && _hook2.deps != null && deps.length !== _hook2.deps.length) {\n      logger.warn(\"The final argument passed to \".concat(name, \" changed size between renders. The order and size of this array must remain constant.\\nPrevious: \").concat(_hook2.deps, \"\\nIncoming: \").concat(deps));\n    }\n\n    if (deps == null || _hook2.deps == null || !areDepsEqual(deps, _hook2.deps)) {\n      callback(_hook2);\n      _hook2.deps = deps;\n    }\n\n    return _hook2;\n  }\n\n  throw invalidHooksError();\n}\n\nfunction useMemoLike(name, nextCreate, deps) {\n  var _useHook = useHook(name, function (hook) {\n    // eslint-disable-next-line no-param-reassign\n    hook.memoizedState = nextCreate();\n  }, deps),\n      memoizedState = _useHook.memoizedState;\n\n  return memoizedState;\n}\n/* Returns a memoized value, see https://reactjs.org/docs/hooks-reference.html#usememo */\n\n\nexport function useMemo(nextCreate, deps) {\n  return useMemoLike('useMemo', nextCreate, deps);\n}\n/* Returns a memoized callback, see https://reactjs.org/docs/hooks-reference.html#usecallback */\n\nexport function useCallback(callback, deps) {\n  return useMemoLike('useCallback', function () {\n    return callback;\n  }, deps);\n}\n\nfunction useRefLike(name, initialValue) {\n  return useMemoLike(name, function () {\n    return {\n      current: initialValue\n    };\n  }, []);\n}\n/* Returns a mutable ref object, see https://reactjs.org/docs/hooks-reference.html#useref */\n\n\nexport function useRef(initialValue) {\n  return useRefLike('useRef', initialValue);\n}\n\nfunction triggerUpdate() {\n  var hooks = getHooksContextOrNull(); // Rerun storyFn if updates were triggered synchronously, force rerender otherwise\n\n  if (hooks != null && hooks.currentPhase !== 'NONE') {\n    hooks.hasUpdates = true;\n  } else {\n    try {\n      addons.getChannel().emit(FORCE_RE_RENDER);\n    } catch (e) {\n      logger.warn('State updates of Storybook preview hooks work only in browser');\n    }\n  }\n}\n\nfunction useStateLike(name, initialState) {\n  var stateRef = useRefLike(name, // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n  typeof initialState === 'function' ? initialState() : initialState);\n\n  var setState = function setState(update) {\n    // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n    stateRef.current = typeof update === 'function' ? update(stateRef.current) : update;\n    triggerUpdate();\n  };\n\n  return [stateRef.current, setState];\n}\n/* Returns a stateful value, and a function to update it, see https://reactjs.org/docs/hooks-reference.html#usestate */\n\n\nexport function useState(initialState) {\n  return useStateLike('useState', initialState);\n}\n/* A redux-like alternative to useState, see https://reactjs.org/docs/hooks-reference.html#usereducer */\n\nexport function useReducer(reducer, initialArg, init) {\n  var initialState = init != null ? function () {\n    return init(initialArg);\n  } : initialArg;\n\n  var _useStateLike = useStateLike('useReducer', initialState),\n      _useStateLike2 = _slicedToArray(_useStateLike, 2),\n      state = _useStateLike2[0],\n      setState = _useStateLike2[1];\n\n  var dispatch = function dispatch(action) {\n    return setState(function (prevState) {\n      return reducer(prevState, action);\n    });\n  };\n\n  return [state, dispatch];\n}\n/*\n  Triggers a side effect, see https://reactjs.org/docs/hooks-reference.html#usestate\n  Effects are triggered synchronously after rendering the story\n*/\n\nexport function useEffect(create, deps) {\n  var hooks = getHooksContextOrThrow();\n  var effect = useMemoLike('useEffect', function () {\n    return {\n      create: create\n    };\n  }, deps);\n\n  if (!hooks.currentEffects.includes(effect)) {\n    hooks.currentEffects.push(effect);\n  }\n}\n\n/* Accepts a map of Storybook channel event listeners, returns an emit function */\nexport function useChannel(eventMap) {\n  var deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var channel = addons.getChannel();\n  useEffect(function () {\n    Object.entries(eventMap).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          type = _ref4[0],\n          listener = _ref4[1];\n\n      return channel.on(type, listener);\n    });\n    return function () {\n      Object.entries(eventMap).forEach(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            type = _ref6[0],\n            listener = _ref6[1];\n\n        return channel.removeListener(type, listener);\n      });\n    };\n  }, [].concat(_toConsumableArray(Object.keys(eventMap)), _toConsumableArray(deps)));\n  return useCallback(channel.emit.bind(channel), [channel]);\n}\n/* Returns current story context */\n\nexport function useStoryContext() {\n  var _getHooksContextOrThr = getHooksContextOrThrow(),\n      currentContext = _getHooksContextOrThr.currentContext;\n\n  if (currentContext == null) {\n    throw invalidHooksError();\n  }\n\n  return currentContext;\n}\n/* Returns current value of a story parameter */\n\nexport function useParameter(parameterKey, defaultValue) {\n  var _useStoryContext = useStoryContext(),\n      parameters = _useStoryContext.parameters;\n\n  if (parameterKey) {\n    return parameters[parameterKey] || defaultValue;\n  }\n\n  return undefined;\n}\n/* Returns current value of story args */\n\nexport function useArgs() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext2 = useStoryContext(),\n      storyId = _useStoryContext2.id,\n      args = _useStoryContext2.args;\n\n  var updateArgs = useCallback(function (updatedArgs) {\n    return channel.emit(UPDATE_STORY_ARGS, {\n      storyId: storyId,\n      updatedArgs: updatedArgs\n    });\n  }, [channel, storyId]);\n  var resetArgs = useCallback(function (argNames) {\n    return channel.emit(RESET_STORY_ARGS, {\n      storyId: storyId,\n      argNames: argNames\n    });\n  }, [channel, storyId]);\n  return [args, updateArgs, resetArgs];\n}\n/* Returns current value of global args */\n\nexport function useGlobals() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext3 = useStoryContext(),\n      globals = _useStoryContext3.globals;\n\n  var updateGlobals = useCallback(function (newGlobals) {\n    return channel.emit(UPDATE_GLOBALS, {\n      globals: newGlobals\n    });\n  }, [channel]);\n  return [globals, updateGlobals];\n}"]},"metadata":{},"sourceType":"module"}